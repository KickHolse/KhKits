# ─────────────────────────────────────────────────── #
#                 ▒███████▒ ███▄    █     ──          #
#                 ▒ ▒ ▒ ▄▀░ ██ ▀█   █                 #
#     ───         ░ ▒ ▄▀▒░ ▓██  ▀█ ██▒                #
#                   ▄▀▒   ░▓██▒  ▐▌██▒                #
#                 ▒███████▒▒██░   ▓██░                #
#                 ░▒▒ ▓░▒░▒░ ▒░   ▒ ▒                 #
#                 ░░▒ ▒ ░ ▒░ ░░   ░ ▒░                #
#                 ░ ░ ░ ░ ░   ░   ░ ░      ───        #
#                   ░ ░             ░                 #
#   ─             ░                                   #
# ─────────────────────────────────────────────────── #
options:
#	Nome: KhKits | Autor: Kiberzn
	version: 10.4

# ──────────────────────────────────────────────────────────────────────────────────────────────────────────────── #
# events
on join:
	teleport player to {warps::spawn}
	khkits_groupmanager(player)
	set {scoreboard.%player%} to true
	"https://api.spigotmc.org/legacy/update.php?resource=67595" != "{@version}":
		set {khkp::check_update} to true
		player has permission "khkits.update" or "khkits.*":
			send "%nl%&3 [KhKits] &7There is a new skript update, click <tooltip:&bClick here to update.><command:/khkits atualizar>&a&lHERE<reset> &7to update.%nl% " to player
	file "plugins/KhKits/players/%player%.yml" doesn't exist:
		create file "plugins/KhKits/players/%player%.yml"
		khkits_reset(player)
		set yml value "%uuid of player%.login.first" of file "plugins/KhKits/players/%player%.yml" to "%now%"
	set yml value "%uuid of player%.selected-kit" of file "plugins/KhKits/players/%player%.yml" to colored {khkp::kit_none}
	set yml value "%uuid of player%.login.last" of file "plugins/KhKits/players/%player%.yml" to "%now%"
	khkits_setup(player, "effects")
	khkits_setup(player, "hotbar")
	khkits_scoreboard(player)
	set player's gamemode to adventure
	player has permission "khkits.voar" or "khkits.*":
		set player's fly mode to true
	{broadcast.%player%} == true:
		set {khkp::broadcast} to yml value "spawn.broadcast" of file "plugins/KhKits/language.yml"
		replace all "{display}" with {display.%player%} in {khkp::broadcast}
		set join message to colored {khkp::broadcast}
	else:
		set join message to ""
	{khkp::tablist.enabled} == true:
		set tab header to colored {khkp::tablist.header} and footer to colored {khkp::tablist.footer} for player
on quit:
	set quit message to ""
	delete {scoreboard.%player%}
on server list ping:
	{khkp::motd.enabled} == true:
		set motd to "%colored {khkp::motd.header}%%nl%%colored {khkp::motd.footer}%"
on chat:
	set {_chatw.%player%} to difference between {chat.%player%.delay} and now
	{_chatw.%player%} is less than 3 seconds:
		cancel event
		set {%player%x.tempo} to "%difference between 3 seconds and {_chatw.%player%}%"
		replace all " seconds" and " second" with "" in {%player%x.tempo}
		set {khkp::chat-delay} to yml value "options.chat.delay" from file "plugins/KhKits/language.yml"
		replace all "{time}" in {khkp::chat-delay} with {%player%x.tempo}
		send colored {khkp::chat-delay} to player
	set {khkp::chat-format} to yml value "options.chat.format" from file "plugins/KhKits/language.yml"
	player has permission "khkits.chat.color" or "khkits.*":
		set {_color} to yml value "options.chat.color.custom" from file "plugins/KhKits/language.yml"
		replace all "{message}" in {khkp::chat-format} with colored message
	else:
		set {_color} to yml value "options.chat.color.default" from file "plugins/KhKits/language.yml"
		replace all "{message}" in {khkp::chat-format} with message
	player doesn't have permission "khkits.chat.delay" or "khkits.*":
		set {chat.%player%.delay} to now
	replace all "{player}" in {khkp::chat-format} with player's displayname
	replace all "{color}" in {khkp::chat-format} with colored {_color}
	replace all "{prefix}" in {khkp::chat-format} with colored {prefix.%player%}
	set chat format to {khkp::chat-format}
on inventory click:
	set {_kit-sel.%player%} to yml value "%uuid of player%.selected-kit" of file "plugins/KhKits/players/%player%.yml"
	{_kit-sel.%player%} == colored {khkp::kit_none}:
		{build.%player%} != true:
			cancel event
on right-click on beacon or lever or any door or any anvil or furnaces or any chest or crafting table or enchantment table or brewing stand or bed or dispenser or dropper or any trapdoor or any fence gate:
	{build.%player%} != true:
		cancel event
on pickup:
	{build.%player%} != true:
		cancel event
on build:
	{build.%player%} != true:
		cancel event
on place:
	{build.%player%} != true:
		cancel event
on break:
	{build.%player%} != true:
		cancel event
on xp spawn:
	cancel event
at 11:01:
	set time to 10:00
on weather change:
	cancel event
on hunger meter change:
	cancel event
on hunger bar change:
	cancel event
on drop:
	event-item != a bowl:
		{build.%player%} != true:
			cancel event
	else:
		loop all dropped items:
			wait 2 seconds
			delete loop-value
on walk on carpet:
	block down is a sponge:
		push player upwards at speed 3.0
		push player forward at speed 2.5
on right-click:
	loop "shop" and "kits" and "warps":
		name of player's tool is getName({khkp::hotbar_%loop-value%}):
			khkits_menu(player, "%loop-value%")
	player's tool is a mushroom soup:
		health of player is less than 9.5:
			cancel event
			set {_kit-sel.%player%} to yml value "%uuid of player%.selected-kit" of file "plugins/KhKits/players/%player%.yml"
			set {life.%player%} to 2.1 or 2.2 or 2.3 or 2.4 or 2.5 or 2.6 or 2.7 or 2.8 or 2.9 or 3.1 or 3.2 or 3.3 or 3.4 or 3.5 or 3.6 or 3.7 or 3.8 or 3.9
			set action bar of player to "&7+%{life.%player%}% &4&l❤"
			set the health of player to the health of player + {life.%player%}
			delete {life.%player%}
			set {_slot} to selected hotbar slot of player
			{_kit-sel.%player%} != "Quick Dropper":
				set slot {_slot} of player to bowl named colored {khkp::bowl}
			else:
				set slot {_slot} of player to air
				drop bowl at player
				play "ITEM_PICKUP" to player at volume 0.5
			play "BURP" to player at volume 0.5
on sign change:
	loop "refill" and "recraft":
		line 1 is "[khkits]" or "[khkp]":
			line 2 is loop-value:
				set line 1 to colored {khkp::%loop-value%.line-1}
				set line 2 to colored {khkp::%loop-value%.line-2}
				set line 3 to colored {khkp::%loop-value%.line-3}
				set line 4 to colored {khkp::%loop-value%.line-4}
on rightclick on sign:
	loop "refill" and "recraft":
		line 1 of clicked block is colored {khkp::%loop-value%.line-1}
		line 2 of clicked block is colored {khkp::%loop-value%.line-2}
		line 3 of clicked block is colored {khkp::%loop-value%.line-3}
		line 4 of clicked block is colored {khkp::%loop-value%.line-4}
		open chest with 3 row named colored {khkp::%loop-value%.title} to player
		wait 3 tick
		loop-value == "refill":
			set {_soupslot} to 0
			loop 27 times:
				set slot {_soupslot} of player's current inventory to mushroom stew named colored {khkp::soup}
				add 1 to {_soupslot}
			stop
		loop-value == "recraft":
			set {_soupslot} to 0
			loop 3 times:
				loop 9 times:
					set slot {_soupslot} of player's current inventory to 64 red mushroom named colored {khkp::red-mushroom}
					add 1 to {_soupslot}
				loop 9 times:
					set slot {_soupslot} of player's current inventory to 64 brown mushroom named colored {khkp::brown-mushroom}
					add 1 to {_soupslot}
				loop 9 times:
					set slot {_soupslot} of player's current inventory to 64 bowl named colored {khkp::bowl}
					add 1 to {_soupslot}
on damage of a player:
	damage cause is void:
		invoke "respawn" from victim and attacker
	set {_kit-sel.%victim%} to yml value "%uuid of victim%.selected-kit" of file "plugins/KhKits/players/%victim%.yml"
	attacker is a player:
		set {_kit-sel.%attacker%} to yml value "%uuid of attacker%.selected-kit" of file "plugins/KhKits/players/%attacker%.yml"
		{_kit-sel.%attacker%} == colored {khkp::kit_none}:
			cancel event
	{_kit-sel.%victim%} == colored {khkp::kit_none}:
		cancel event
	set {_attacker} to attacker
	set {lasthit.%victim%} to {_attacker}			
	if damage is greater than or equal to health of victim:
		{_kit-sel.%victim%} != colored {khkp::kit_none}:
			cancel event
			create a fake explosion at the victim
			set {_deaths.%victim%} to yml value "%uuid of victim%.deaths" of file "plugins/KhKits/players/%victim%.yml"
			add 1 to {_deaths.%victim%}
			set yml value "%uuid of victim%.deaths" of file "plugins/KhKits/players/%victim%.yml" to {_deaths.%victim%}
			loop "death" and "suicide":
				set {khkp::%loop-value%} to yml value "messages.%loop-value%" of file "plugins/KhKits/language.yml"
			{_kit-sel.%victim%} != colored {khkp::kit_lava-challenge}:
				khkits_coinsmanager(victim, "remove", {khkp::per-death})
				set action bar of victim to "&c- %{khkp::per-death}% moedas"	
			replace all "{victim}" with colored {colored.%victim%} in {khkp::suicide} and {khkp::death}			
			invoke "respawn" from victim and attacker
			attacker is a player:
				delete {ninja-victim.%{lasthit.%victim%}%}
				set {_kills.%{lasthit.%victim%}%} to yml value "%uuid of {lasthit.%victim%}%.kills" of file "plugins/KhKits/players/%{lasthit.%victim%}%.yml"
				replace all "{attacker}" with colored {colored.%{lasthit.%victim%}%} in {khkp::death}
				add 1 to {_kills.%{lasthit.%victim%}%}
				khkits_coinsmanager(victim, "add", {khkp::per-kill})
				set yml value "%uuid of {lasthit.%victim%}%.kills" of file "plugins/KhKits/players/%{lasthit.%victim%}%.yml" to {_kills.%{lasthit.%victim%}%}
				set action bar of attacker to "&6+ %{khkp::per-kill}% moedas"
				broadcast colored {khkp::death}
			else:
				broadcast colored {khkp::suicide}
			
# ──────────────────────────────────────────────────────────────────────────────────────────────────────────────── #
# commands
command /khkits [<text = help>] [<text>] [<text>] [<text>]:
	permission: khkits.*
	permission message: §3[KhKits] §7v{@version} §f- §7Criado por §6Kiberzn§7.
	trigger:
		arg 1 == "help":
			send "%nl%  &eAjuda - KhKits &71/1%nl% "
			send "&3 /khkits atualizar &f- &7Atualiza o skript"
			send "&3 /khkits build &f- &7Alterna o modo construtor"
			send "&3 /khkits coins &f- &7Administra os coins de um jogador"
			send "&3 /khkits reset &f- &7Reseta as estatísticas de um player"
			send "&3 /khkits warps &f- &7Define as warps"
			send newline
		arg 1 == "warps":
			arg 2 != "spawn" or "fps" or "lava-challenge" or "knockback":
				send "%nl%  &eAjuda - Warps 1/1%nl% "
				send "&3 /khkits warps spawn&f - &7Definite o spawn"
				send "&3 /khkits warps fps&f - &7Definite a warp fps"
				send "&3 /khkits warps lava-challenge&f - &7Definite a warp lava-challenge"
				send "&3 /khkits warps knockback &f- &7Definite a warp knockback%nl% "
			loop "spawn" and "fps" and "lava-challenge" and "knockback":
				arg 2 == loop-value:
					set {warps::%loop-value%} to location of player
					set action bar of player to "&aO &l%loop-value% &afoi definido com sucesso"
		arg 1 == "coins":
			arg 2 != "add" or "remove" or "set":
				send "%nl%  &eAjuda - Coins 1/1%nl% "
				send "&3 /khkits coins add&f - &7Adiciona coins"
				send "&3 /khkits coins remove&f - &7Remove coins"
				send "&3 /khkits coins set &f- &7Seta coins%nl% "
			arg 2 == "add":
				arg 3 is set:
					arg 4 is set:
						set {_p} to arg 3 parsed as offlineplayer
						set {_n} to arg 4 parsed as int
						"%{_n}%" contains "none" or "-":
							send "&cUtilize apenas números positivos para isso."
						else:
							khkits_coinsmanager({_p}, "add", {_n})
							set {_n} to formatNumber({_n})
							send "&aVocê adicionou &6%{_n}% moedas&a para %{colored.%{_p}%}%&a." to player
					else:
						send "&cUtilize: /khkits coins add <jogador> <número>"
				else:
					send "&cUtilize: /khkits coins add <jogador> <número>"
			arg 2 == "remove":
				arg 3 is set:
					arg 4 is set:
						set {_p} to arg 3 parsed as offlineplayer
						set {_n} to arg 4 parsed as int
						"%{_n}%" contains "none" or "-":
							send "&cUtilize apenas números positivos para isso."
						else:
							khkits_coinsmanager({_p}, "remove", {_n})
							set {_n} to formatNumber({_n})
							send "&cVocê removeu &6%{_n}% moedas&c de %{colored.%{_p}%}%&c." to player
					else:
						send "&cUtilize: /khkits coins remove <jogador> <número>"
				else:
					send "&cUtilize: /khkits coins remove <jogador> <número>"
			arg 2 == "set":
				arg 3 is set:
					arg 4 is set:
						set {_p} to arg 3 parsed as offlineplayer
						set {_n} to arg 4 parsed as int
						"%{_n}%" contains "none" or "-":
							send "&cUtilize apenas números positivos para isso."
						else:
							khkits_coinsmanager({_p}, "set", {_n})
							set {_n} to formatNumber({_n})
							send "&aVocê setou as moedas de %{colored.%{_p}%}%&a para &6%{_n}%&a." to player
					else:
						send "&cUtilize: /khkits coins set <jogador> <número>"
				else:
					send "&cUtilize: /khkits coins set <jogador> <número>"
		arg 1 == "build":
			{build.%player%} != true:
				set {build.%player%} to true
				set action bar of player to colored {khkp::build_enabled}
				set player's gamemode to creative
			else:
				delete {build.%player%}
				set player's gamemode to adventure
				set action bar of player to colored {khkp::build_disabled}
				player has permission "khkits.voar" or "khkits.*":
					set {_kit-sel.%player%} to yml value "%uuid of player%.selected-kit" of file "plugins/KhKits/players/%player%.yml"
					{_kit-sel.%player%} == colored {khkp::kit_none}:
						set player's fly mode to true
		arg 1 == "reset":
			arg 2 is set:
				set {arg-2} to arg 2 parsed as offlineplayer
				khkits_reset({arg-2})
				send "&aVocê resetou as estatísticas de %{colored.%arg 2%}%"
			else:
				send "&cUtilize /khkits reset <jogador>"
		arg 1 == "atualizar":
			{khkp::check_update} == true:
				set action bar of player to "&aConectando com o site..."
				wait 2 second
				set {_percent1} to 90
				loop 90 times:
					add 1 to {_percent2}
					set {_percent} to {_percent2}/{_percent1}*100
					set action bar of player to "&aBaixando arquivo... &8(%{_percent}%%%)"
					wait a tick
				set {_sk} to script name
				delete file "plugins/Skript/scripts/%{_sk}%.sk"
				delete file "plugins/KhKits/language.yml"
				download file from "https://raw.githubusercontent.com/KickHolse/KhKits/master/update" to file "plugins/Skript/scripts/%{_sk}%.sk"
				reload script "%{_sk}%"
				play "ORB_PICKUP" to player at volume 1.0
				set action bar of player to "&aAtualização instalada com sucesso!"
			else:
				send "&cO skript se encontra em sua ultima versão."
command /kit [<text>] [<text>]:
	trigger:
		arg 1 == "buy":
			arg 2 == "shop":
				khkits_menu(player, "shop")
			arg 2 == "main":
				khkits_menu(player, "shop-kits")
			arg 2 == "main-2":
				khkits_menu(player, "shop-kits-2")
			arg 2 != "shop" or "main" or "main-2":
				khkits_kitsbuy(player, arg 2)
		arg 1 == "page-1_kits":
			khkits_menu(player, "kits")
		arg 1 == "page-2_kits":
			khkits_menu(player, "kits-2")
		arg 1 != "page-2_kits" or "page-1_kits" or "buy":
			set {_kit-sel.%player%} to yml value "%uuid of player%.selected-kit" of file "plugins/KhKits/players/%player%.yml"
			{_kit-sel.%player%} != "%{khkp::kit_fps}%" or "%{khkp::kit_knockback}%" or "%{khkp::kit_lava-challenge}%":
				arg 1 is set:
					khkits_kits(player, arg 1)
			else:
				send "&cVocê não pode usar este comando aqui!"
command /moedas:
	aliases: /money, /cash, /coins
	trigger:
		set {_coins.%player%} to yml value "%uuid of player%.coins" of file "plugins/KhKits/players/%player%.yml"
		set {_coins.%player%} to formatNumber({_coins.%player%})
		send "&fSeu saldo é de &6%{_coins.%player%}%"
command /voar:
	aliases: /fly
	trigger:
		player has permission "khkits.voar" or "khkits.*":
			set {_kit-sel.%player%} to yml value "%uuid of player%.selected-kit" of file "plugins/KhKits/players/%player%.yml"
			{_kit-sel.%player%} == colored {khkp::kit_none}:
				player's fly mode == true:
					play sound "ITEM PICKUP" to player with volume 0.5 and pitch 15.0
					set action bar of player to colored {khkp::fly_disabled}
					set player's fly mode to false
				else:
					play sound "ITEM PICKUP" to player with volume 0.5 and pitch 15.0
					set action bar of player to colored {khkp::fly_enabled}
					set player's fly mode to true
			else:
				send colored {khkp::area-not-allowed}
		else:
			send colored {khkp::without_permission}
command /warp [<text>]:
	trigger:
		loop "spawn" and "fps" and "lava-challenge" and "knockback":
			arg 1 == loop-value:
				{warps::%loop-value%} is set:
					khkits_setup(player, "effects")
					set player's gamemode to adventure
					set player's fly mode to false
					loop 3 and 2 and 1:
						set {khkp::warp-tp_delay} to yml value "messages.warp-tp.delay" of file "plugins/KhKits/language.yml"
						replace all "{time}" with "%loop-value-2%" in {khkp::warp-tp_delay}
						set action bar of player to colored {khkp::warp-tp_delay}
						play sound "ORB PICKUP" to player with volume 0.5 and pitch 15.0
						wait 1 second
					play "LEVEL_UP" to player at volume 0.5
					set action bar of player to colored {khkp::warp-tp_sucess}
					teleport player to {warps::%loop-value%}
					file "plugins/KhKits/players/%player%.yml" exists:
						set {nameloop-%loop-value%} to loop-value
						loop-value == "spawn":
							set {nameloop-%loop-value%} to "none"
						set yml value "%uuid of player%.selected-kit" of file "plugins/KhKits/players/%player%.yml" to colored {khkp::kit_%{nameloop-%loop-value%}%}
					loop-value == "fps":
						khkits_setup(player, "give_soup")
						set slot 0 of player to unbreakable stone sword named "&eEspada"
						equip player with unbreakable iron Chestplate named "&ePeitoral"
						stop
					loop-value == "lava-challenge":
						khkits_setup(player, "give_soup")
						stop
					loop-value == "knockback":
						khkits_setup(player, "give_soup")
						set slot 0 of player to stick of knockback 5 and sharpness 2 named "&eBastão"
						equip player with unbreakable iron Chestplate named "&ePeitoral"
						stop
					loop-value == "spawn":
						khkits_setup(player, "hotbar")
						player has permission "khkits.voar" or "khkits.*":
							set player's fly mode to true
						stop
				else:
					send "&cEsta warp não foi configurada!"
on command:
	command is "spawn" or "fps" or "lava-challenge" or "knockback":
		cancel event
		make player execute command "warp %command%"
command /stats [<offlineplayer>]:
	trigger:
		arg 1 is set:
			player has permission "khkits.stats" or "khkits.*":
				arg 1 != player:
					khkits_getstats(player, offlineplayer-arg)
				else:
					khkits_getstats(player, player)
		else:
			khkits_getstats(player, player)
		
# ──────────────────────────────────────────────────────────────────────────────────────────────────────────────── #
# skills
on walk on sand or sandstone:
	set {_kit-sel.%player%} to yml value "%uuid of player%.selected-kit" of file "plugins/KhKits/players/%player%.yml"
	{_kit-sel.%player%} == "Camel":
		remove speed and regeneration from player
		apply speed and regeneration 1 to player for 3 seconds
		khkits_skill(player, "%{_kit-sel.%player%}%")

# ──────────────────────────────────────────────────────────────────────────────────────────────────────────────── #
# file manager
function khkits_filemanager(use: text):
	{_use} == "value":
		delete {khkp::*}
		loop "warps" and "kits" and "shop":
			set {khkp::hotbar_%loop-value%} to yml value "spawn.hotbar.%loop-value%" from file "plugins/KhKits/language.yml"
		loop "motd.enabled" and "motd.header" and "motd.footer" and "tablist.enabled" and "tablist.header" and "tablist.footer":
			set {khkp::%loop-value%} to yml value "options.%loop-value%" from file "plugins/KhKits/language.yml"
		loop "per-kill" and "per-death":
			set {khkp::%loop-value%} to yml value "options.coins.%loop-value%" from file "plugins/KhKits/language.yml"
		loop "enabled" and "disabled":
			set {khkp::build_%loop-value%} to yml value "messages.build.%loop-value%" from file "plugins/KhKits/language.yml"
		loop "enabled" and "disabled":
			set {khkp::fly_%loop-value%} to yml value "messages.fly.%loop-value%" from file "plugins/KhKits/language.yml"
		loop "none" and "fps" and "lava-challenge" and "knockback":
			set {khkp::kit_%loop-value%} to yml value "messages.warp-names.%loop-value%" from file "plugins/KhKits/language.yml"
		loop "red-mushroom" and "brown-mushroom" and "bowl":
			set {khkp::%loop-value%} to yml value "options.signs.recraft.items.%loop-value%" from file "plugins/KhKits/language.yml"
		loop "recraft.line-1" and "recraft.line-2" and "recraft.line-3" and "recraft.line-4" and "recraft.title" and "refill.line-1" and "refill.line-2" and "refill.line-3" and "refill.line-4" and "refill.title":
			set {khkp::%loop-value%} to yml value "options.signs.%loop-value%" from file "plugins/KhKits/language.yml"
		set {khkp::kitreplace_select} to yml value "messages.kit.replaces.select" from file "plugins/KhKits/language.yml"
		set {khkp::soup} to yml value "options.signs.refill.items.soup" from file "plugins/KhKits/language.yml"
		set {khkp::without_permission} to yml value "messages.without-permission" from file "plugins/KhKits/language.yml"
		set {khkp::area-not-allowed} to yml value "messages.area-not-allowed" from file "plugins/KhKits/language.yml"
		set {khkp::warp-tp_sucess} to yml value "messages.warp-tp.sucess" from file "plugins/KhKits/language.yml"

		set {score.title} to yaml value "scoreboard.title" from file "plugins/KhKits/language.yml"
		set {_temp::*} to yaml list "scoreboard.lines" from file "plugins/KhKits/language.yml"
		set {score.lines} to 0
		set {_empty} to 0
		delete {score.line::*}
		set {_line} to amount of {_temp::*}
		loop {_temp::*}:
			add 1 to {score.lines}
			"%loop-value%" == "":
				set {score.line::%{_line}%} to "§%{_empty}%"
				{_empty} < 9:
					add 1 to {_empty}
			else:
				set {score.line::%{_line}%} to colored loop-value
			remove 1 from {_line}

		delete {groups::*}
		set {_temp::*} to skutil yaml nodes with keys "groups" from file "plugins/KhKits/groups.yml"
		loop {_temp::*}:
			set {_group} to loop-value
			replace all ".name" and ".color" and ".prefix" and ".permission" and ".broadcast" in {_group} with ""
			{groups::*} contains "%{_group}%":
				remove "%{_group}%" from {groups::*}
			add "%{_group}%" to {groups::*}
		set {_pos} to size of {groups::*}
		delete {node::*}
		loop {groups::*}:
			set {_group} to loop-value
			set {_name} to yaml value "groups.%{_group}%.name" from file "plugins/KhKits/groups.yml"
			set {node::%{_group}%.color} to yaml value "groups.%{_group}%.color" from file "plugins/KhKits/groups.yml"
			set {_prefix} to yaml value "groups.%{_group}%.prefix" from file "plugins/KhKits/groups.yml"
			set {node::%{_group}%.position} to {_pos}
			set {node::%{_group}%.permission} to yaml value "groups.%{_group}%.permission" from file "plugins/KhKits/groups.yml"
			set {node::%{_group}%.broadcast} to yaml value "groups.%{_group}%.broadcast" from file "plugins/KhKits/groups.yml"
			set {node::%{_group}%.name} to colored {_name}
			set {node::%{_group}%.prefix} to colored {_prefix}
			remove 1 from {_pos}
		
		delete {kits::*}
		set {_tempt::*} to skutil yaml nodes with keys "kits" from file "plugins/KhKits/kits.yml"
		loop {_tempt::*}:
			set {_kit} to loop-value
			replace all "price" and "lore" in {_kit} with ""
			{kits::*} contains "%{_kit}%":
				remove "%{_kit}%" from {kits::*}
			add "%{_kit}%" to {kits::*}
		delete {nodet::*}
		loop {kits::*}:
			set {_kit} to loop-value
			set {node::%{_kit}%.price} to yaml value "kits.%{_kit}%.price" from file "plugins/KhKits/kits.yml"
			set {node::%{_kit}%.lore} to yaml value "kits.%{_kit}%.lore" from file "plugins/KhKits/kits.yml"
			replace all "\n" in {node::%{_kit}%.lore} with "||"
	{_use} == "create":
		file "plugins/KhKits/language.yml" doesn't exist:
			create file "plugins/KhKits/config.yml"
			delete file "plugins/KhKits/config.yml"
			download file from "https://raw.githubusercontent.com/KickHolse/KhKits/master/language" to file "plugins/KhKits/language.yml"
		file "plugins/KhKits/groups.yml" doesn't exist:
			download file from "https://raw.githubusercontent.com/KickHolse/KhKits/master/groups" to file "plugins/KhKits/groups.yml"
		file "plugins/KhKits/kits.yml" doesn't exist:
			download file from "https://raw.githubusercontent.com/KickHolse/KhKits/master/kits" to file "plugins/KhKits/kits.yml"
		khkits_filemanager("value")

# ──────────────────────────────────────────────────────────────────────────────────────────────────────────────── #
# functions and sub
sub "respawn":
	set {_p} to parameter 1
	set {_p2} to parameter 2
	set {_p}'s gamemode to adventure
	khkits_setup({_p}, "effects")
	set {_kit-sel.%{_p}%} to yml value "%uuid of {_p}%.selected-kit" of file "plugins/KhKits/players/%{_p}%.yml"
	{_kit-sel.%{_p}%} != colored {khkp::kit_knockback}:
		{_kit-sel.%{_p}%} == colored {khkp::kit_fps}:
			set yml value "%uuid of {_p}%.selected-kit" of file "plugins/KhKits/players/%{_p}%.yml" to colored {khkp::kit_fps}
			set slot 0 of {_p} to unbreakable stone sword named "&eEspada"
			equip {_p} with unbreakable iron Chestplate named "&ePeitoral"
			khkits_setup({_p}, "give_soup")
			teleport {_p} to {warps::fps}
			stop
		{_kit-sel.%{_p}%} == colored {khkp::warplava}:
			set yml value "%uuid of {_p}%.selected-kit" of file "plugins/KhKits/players/%{_p}%.yml" to colored {khkp::kit_lava-challenge}
			khkits_setup({_p}, "give_soup")
			teleport {_p} to {warps::lava-challenge}
			stop
		teleport {_p} to {warps::spawn}
		khkits_setup({_p}, "hotbar")
		set yml value "%uuid of {_p}%.selected-kit" of file "plugins/KhKits/players/%{_p}%.yml" to colored {khkp::kit_none} 
		{_p} has permission "khkits.voar" or "khkits.*":
			set {_p}'s fly mode to true
	else:
		set {_p}'s health to 2
function khkits_skill(p: player, s: text):
	{_s} is set:
		set {_kit-sel.%{_p}%} to yml value "%uuid of {_p}%.selected-kit" of file "plugins/KhKits/players/%{_p}%.yml"
		set {khkp::enable-skill} to yml value "messages.kit.enable-skill" of file "plugins/KhKits/language.yml"
		replace all "{kit}" with colored {_s} in {khkp::enable-skill}
		set action bar of {_p} to colored {khkp::enable-skill}
function khkits_getstats(p: player, arg: offlineplayer):
	{_arg} is online:
		open chest with 3 row named "&8%{_arg}'s displayname%&8 - Estatísticas" to {_p}
		play sound "click" to {_p} with volume 0.5 and pitch 15.0
		wait 3 ticks
		set {_coins.%{_arg}%} to yml value "%uuid of {_arg}%.coins" of file "plugins/KhKits/players/%{_arg}%.yml"
		set {_deaths.%{_arg}%} to yml value "%uuid of {_arg}%.deaths" of file "plugins/KhKits/players/%{_arg}%.yml"
		set {_kills.%{_arg}%} to yml value "%uuid of {_arg}%.kills" of file "plugins/KhKits/players/%{_arg}%.yml"
		set {_flogin.%{_arg}%} to yml value "%uuid of {_arg}%.login.first" of file "plugins/KhKits/players/%{_arg}%.yml"
		set {_llogin.%{_arg}%} to yml value "%uuid of {_arg}%.login.last" of file "plugins/KhKits/players/%{_arg}%.yml"
		set {_coins.%{_arg}%} to formatNumber({_coins.%{_arg}%})
		format slot 13 of {_p} with skull of {_arg} named "%{colored.%{_arg}%}%" with lore "&fCoins: &6%{_coins.%{_arg}%}%||&fAbates: &7%{_kills.%{_arg}%}%||&fMortes: &7%{_deaths.%{_arg}%}%||||&fCadastrado em: &7%{_flogin.%{_arg}%}%||&fÚltimo login: &7%{_llogin.%{_arg}%}%" to run [make {_p} execute command "som 2"]
	else:
		send "Este jogador não está online no momento!" to {_p}
function khkits_reset(p: player):
	set yml value "%uuid of {_p}%.name" of file "plugins/KhKits/players/%{_p}%.yml" to "%{_p}%"
	set yml value "%uuid of {_p}%.selected-kit" of file "plugins/KhKits/players/%{_p}%.yml" to "%{khkp::kit_none}%"
	set yml value "%uuid of {_p}%.kills" of file "plugins/KhKits/players/%{_p}%.yml" to 0
	set yml value "%uuid of {_p}%.deaths" of file "plugins/KhKits/players/%{_p}%.yml" to 0
	set yml value "%uuid of {_p}%.coins" of file "plugins/KhKits/players/%{_p}%.yml" to 0
function khkits_setup(p: player, event: text):
	{_event} == "effects":
		delete {build.%{_p}%} and {espinhos.%{_p}%} and {ninja-time.%{_p}%} and {ninja-victim.%{_p}%} and {ninja.%{_p}%}
		set {_p}'s max health to 10
		heal {_p}
		extinguish {_p}
		set {_p}'s food to 10
		clear {_p}'s level
		clear {_p}'s inventory
		milk {_p}
	{_event} == "give_soup":
		give {_p} 36 soup named colored {khkp::soup}
		set slot 13 of {_p} to 64 red mushroom named colored {khkp::red-mushroom}
		set slot 14 of {_p} to 64 brown mushroom named colored {khkp::brown-mushroom}
		set slot 15 of {_p} to 64 bowl named colored {khkp::bowl}
	{_event} == "hotbar":
		loop "hotbar_warps" and "hotbar_kits" and "hotbar_shop":
			set {_slot} to getSlot({khkp::%loop-value%}) parsed as int
			set {_item} to getItem({khkp::%loop-value%})
			{_item} contains "HEAD:owner=":
				set {_x} to last element of {_item} split at "HEAD:owner=" parsed as offline player
				{_x} == "{player}":
					replace all "{player}" in {_x} with "%{_p}%"
					set {_x} to "%{_x}%" parsed as player
				set slot {_slot} of {_p} to {_x}'s skull named getName({khkp::%loop-value%}) with lore getLore({khkp::%loop-value%})
			else if {_item} contains "SHINY ":
				replace all "SHINY " in {_item} with ""
				set {_item} to "%{_item}%" parsed as material
				set slot {_slot} of {_p} to shiny {_item} named getName({khkp::%loop-value%}) with lore getLore({khkp::%loop-value%})
			else:
				set {_item} to "%{_item}%" parsed as material
				set slot {_slot} of {_p} to {_item} named getName({khkp::%loop-value%}) with lore getLore({khkp::%loop-value%})
function khkits_groupmanager(p: player):
	loop {groups::*}:
		"%{node::%loop-value%.permission}%" == "none":
			set {rank.%{_p}%} to "%loop-value%"
			set {prefix.%{_p}%} to colored {node::%loop-value%.prefix}
			set {group.%{_p}%} to "%colored {node::%loop-value%.color}%%{node::%loop-value%.name}%"
			set {colored.%{_p}%} to "%colored {node::%loop-value%.color}%%{_p}'s displayname%"
			set {display.%{_p}%} to "%colored {node::%loop-value%.prefix}%%{_p}'s displayname%"
			set {position.%{_p}%} to "%{node::%loop-value%.position}%" parsed as int
			set {broadcast.%{_p}%} to {node::%loop-value%.broadcast}
		{_p} has permission "%{node::%loop-value%.permission}%":
			set {rank.%{_p}%} to "%loop-value%"
			set {prefix.%{_p}%} to colored {node::%loop-value%.prefix}
			set {group.%{_p}%} to "%colored {node::%loop-value%.color}%%{node::%loop-value%.name}%"
			set {colored.%{_p}%} to "%colored {node::%loop-value%.color}%%{_p}'s displayname%"
			set {display.%{_p}%} to "%colored {node::%loop-value%.prefix}%%{_p}'s displayname%"
			set {position.%{_p}%} to "%{node::%loop-value%.position}%" parsed as int
			set {broadcast.%{_p}%} to {node::%loop-value%.broadcast}
		khkits_updateTag({_p})
function khkits_updateTag(p: player):
	{prefix.%{_p}%} contains " ":
		make console execute command "nte player %{_p}% prefix %{prefix.%{_p}%}%%{node::%{rank.%{_p}%}%.color}%"
	else:
		make console execute command "nte player %{_p}% prefix %{prefix.%{_p}%}%"
	make console execute command "nte player %{_p}% priority %{position.%{_p}%}%"
function khkits_coinsmanager(p: player, type: text, gold: number) :: boolean:
	set {_coins.%{_p}%} to yml value "%uuid of {_p}%.coins" of file "plugins/KhKits/players/%{_p}%.yml"
	set {_uuid} to uuid of {_p}
	{_type} == "add":
		set {_adicionar} to {_coins.%{_p}%} parsed as int
		add {_gold} to {_adicionar}
		{_adicionar} < 99999999999:
			add {_gold} to {_coins.%{_p}%}
			set yml value "%{_uuid}%.coins" of file "plugins/KhKits/players/%{_p}%.yml" to {_coins.%{_p}%}
	{_type} == "remove":
		{_coins.%{_p}%} >= {_gold}:
			remove {_gold} from {_coins.%{_p}%}
			set yml value "%{_uuid}%.coins" of file "plugins/KhKits/players/%{_p}%.yml" to {_coins.%{_p}%}
		else:
			set {_coins.%{_p}%} to 0
			set yml value "%{_uuid}%.coins" of file "plugins/KhKits/players/%{_p}%.yml" to {_coins.%{_p}%}
	{_type} == "set":
		set {_coins.%{_p}%} to {_gold}
		set yml value "%{_uuid}%.coins" of file "plugins/KhKits/players/%{_p}%.yml" to {_coins.%{_p}%}
function khkits_scoreboard(p: player):
	delete stylish scoreboard "SCORE-%{_p}%"
	create new stylish scoreboard named "SCORE-%{_p}%"
	set {_line} to 1
	loop {score.lines} times:
		create a new id based score "SCORE-%{_p}%Slot%{_line}%" with text "&%{_line}%" slot {_line} for stylish scoreboard "SCORE-%{_p}%"
		add 1 to {_line}
	while {_p} is online:
		set stylish scoreboard of {_p} to "SCORE-%{_p}%"		
		set title of stylish scoreboard "SCORE-%{_p}%" to getText({_p}, colored {score.title})
		set {_line} to 1
		loop {score.lines} times:
			set the text of id "SCORE-%{_p}%Slot%{_line}%" to getText({_p}, "%{score.line::%{_line}%}%")
			add 1 to {_line}
		wait 1 seconds
function getSlot(text: text) :: text:
	set {_string::*} to {_text} split at " : "
	set {_slot} to {_string::1}
	replace all "slot>" in {_slot} with ""
	return "%{_slot}%"
function getItem(text: text) :: text:
	set {_string::*} to {_text} split at " : "
	set {_item} to {_string::2}
	replace all "item>" in {_item} with ""
	return "%{_item}%"
function getName(text: text) :: text:
	set {_string::*} to {_text} split at " : "
	set {_name} to {_string::3}
	replace all "named>" in {_name} with ""
	return colored {_name}
function getLore(text: text) :: text:
	set {_string::*} to {_text} split at " : "
	set {_lore} to {_string::4}
	replace all "lore>" in {_lore} with ""
	replace all "\n" in {_lore} with "||"
	return colored {_lore}
function getText(p: player, var: text) :: text:
	set {_kit-sel.%{_p}%} to yml value "%uuid of {_p}%.selected-kit" of file "plugins/KhKits/players/%{_p}%.yml"
	set {_coins.%{_p}%} to yml value "%uuid of {_p}%.coins" of file "plugins/KhKits/players/%{_p}%.yml"
	set {_coins.%{_p}%} to formatNumber({_coins.%{_p}%})
	set {_deaths.%{_p}%} to yml value "%uuid of {_p}%.deaths" of file "plugins/KhKits/players/%{_p}%.yml"
	set {_kills.%{_p}%} to yml value "%uuid of {_p}%.kills" of file "plugins/KhKits/players/%{_p}%.yml"
	replace all "{now}" in {_var} with "%now%"
	replace all "{kit}" in {_var} with "%{_kit-sel.%{_p}%}%"
	replace all "{group}" in {_var} with "%{group.%{_p}%}%"
	replace all "{kills}" in {_var} with "%{_kills.%{_p}%}%"
	replace all "{deaths}" in {_var} with "%{_deaths.%{_p}%}%"
	replace all "{coins}" in {_var} with "%{_coins.%{_p}%}%"
	replace all "{name}" and "{player}" in {_var} with {colored.%{_p}%}
	replace all "{online}" in {_var} with "%number of all players%"
	replace all "Ã§" in {_var} with "ç"
	replace all "Ã©" in {_var} with "é"
	replace all "Ã£" in {_var} with "ã"
	replace all "Ã¡" in {_var} with "á"
	replace all "Ã§" in {_var} with "ç"
	replace all "Ãª" in {_var} with "ê"
	replace all "Ãµ" in {_var} with "õ"
	replace all "Ã­" in {_var} with "í"
	replace all "Ã³" in {_var} with "ó"
	replace all "Ã " in {_var} with "à"
	return "%{_var}%"
import:
    java.text.DecimalFormat
    java.text.DecimalFormatSymbols
expression %number% with decimal format %string%:
    return type: string
    get:
        return (new DecimalFormat(expr-2)).format(expr-1)
function formatNumber(var: number) :: text:
    set {_x} to {_var} with decimal format "######,######"
    return "%{_x}%"
function khkits_menu(p: player, type: text):
	{_type} == "warps":
		wait 3 tick
		set {fps_online} and {knockback_online} and {lava-challenge_online} to number of all players
		loop all players:
			set {_kit-sel.%loop-player%} to yml value "%uuid of loop-player%.selected-kit" of file "plugins/KhKits/players/%loop-player%.yml"
			loop "fps" and "knockback" and "lava-challenge":
				{_kit-sel.%loop-player%} != "%{khkp::kit_%loop-value-2%}%":
					remove 1 from {%loop-value-2%_online}
		open chest with 3 row named "Warps" to {_p}
		play sound "CLICK" to {_p} with volume 0.5 and pitch 15.0
		wait 1 tick
		format slot 10 of {_p} with plain glass block named "&aFPS" with lore "&7Esta warp é ideal para aqueles||&7jogadores que possuem uma máquina mais||&7humilde. Jogue aqui sem problemas com fps!|| ||&7%{fps_online}% jogando!||&eClique aqui para ir até a warp!" to close then run [make {_p} execute command "fps"]
		format slot 12 of {_p} with shiny stick named "&aKNOCKBACK" with lore "&7Nesta warp você poderá jogar||&7seus amigos para mem longe||&7e matalos muito fácil!|| ||&7%{knockback_online}% jogando!||&eClique aqui para ir até a warp!" to close then run [make {_p} execute command "knockback"]
		format slot 14 of {_p} with lava bucket named "&aLAVA CHALLENGE" with lore "&7Quer treinar seu refill? Este é||&7o desafio perfeito para você. Tente||&7sobreviver em um rio de lava.|| ||&7%{lava-challenge_online}% jogando!||&eClique aqui para ir até a warp!" to close then run [Make {_p} execute command "lava-challenge"]
	{_type} == "shop":
		wait 3 tick
		open chest with 3 row named "Loja" to {_p}
		play sound "CLICK" to {_p} with volume 0.5 and pitch 15.0
		wait 1 tick
		{kit_count.%{_p}%} is not set:
			set {kit_count.%{_p}%} to 0
		format slot 12 of {_p} with diamond sword named "&aKits" with lore "&7 Tenha vantagem extra ao usar||&7 nossos kits que possuem poderes||&7 especiais.|||| &fDesbloqueados: &c%{kit_count.%{_p}%}%/24 |||| &eClique aqui para ver!" to run [make {_p} execute command "kit buy main"]
		format slot 14 of {_p} with player head with custom nbt "{display:{Name:""&aGritos de Mortes""},SkullOwner:{Id:""b03562f3-2a20-4257-bb62-e040f552c297"",Properties:{textures:[{Value:""eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMWYxYjg3NWRlNDljNTg3ZTNiNDAyM2NlMjRkNDcyZmYyNzU4M2ExZjA1NGYzN2U3M2ExMTU0YjViNTQ5OCJ9fX0=""}]}}}" with lore "&7 Gritos de mortes são sons que||&7 irão ser reproduzidos toda vez||&7 que você morrer.||||&f Desbloqueados: &c-/-||||&e Clique aqui para ver!" to run [make {_p} execute command "/som 1"]
	{_type} == "kits":
		wait 3 tick
		open chest with 6 row named "Kits 1/2" to {_p}
		play sound "CLICK" to {_p} with volume 0.5 and pitch 15.0
		wait 1 tick
		format slot 10 of {_p} with stone sword named "&aNormal" with lore "||&7  Este é um kit espécial para quem||&7  é novo aqui no servidor.||||%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Normal"]
		format slot 11 of {_p} with diamond boots named "&aAnti Stomper" with lore "%colored {node::Anti-Stomper.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Anti-Stomper"]
		format slot 12 of {_p} with water bucket named "&aAquaman" with lore "%colored {node::Aquaman.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Aquaman"]
		format slot 13 of {_p} with bow named "&aArcher" with lore "%colored {node::Archer.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Archer"]
		format slot 14 of {_p} with sand named "&aCamel" with lore "%colored {node::Camel.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Camel"]
		format slot 15 of {_p} with 11-disc named "&aDarkness" with lore "%colored {node::Darkness.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Darkness"]
		format slot 16 of {_p} with cactus named "&aEspinhos" with lore "%colored {node::Espinhos.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Espinhos"]
		format slot 19 of {_p} with fishing rod named "&aFisherman" with lore "%colored {node::Fisherman.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Fisherman"]
		format slot 20 of {_p} with blaze powder named "&aFogaréu" with lore "%colored {node::Fogareu.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Fogareu"]
		format slot 21 of {_p} with player head with custom nbt "{display:{Name:""&aFrog""},SkullOwner:{Id:""6e0e69d8-ac58-40a1-baf8-68de9d85cff8"",Properties:{textures:[{Value:""eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZDJjM2I5OGFkYTE5OTU3ZjhkODNhN2Q0MmZhZjgxYTI5MGZhZTdkMDhkYmY2YzFmODk5MmExYWRhNDRiMzEifX19""}]}}}" with lore "%colored {node::Frog.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Frog"]
		format slot 22 of {_p} with feather named "&aGalinha Voadora" with lore "%colored {node::Galinha-Voadora.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Galinha-Voadora"]
		format slot 23 of {_p} with diamond sword named "&aWarrior" with lore "%colored {node::Warrior.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Warrior"]
		format slot 24 of {_p} with golden chestplate named "&aInvencível" with lore "%colored {node::Invencivel.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Invencivel"]
		format slot 25 of {_p} with firework rocket named "&aKangaroo" with lore "%colored {node::Kangaroo.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Kangaroo"]
		format slot 28 of {_p} with blaze rod named "&aMonk" with lore "%colored {node::Monk.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Monk"]
		format slot 29 of {_p} with nether star named "&aNinja" with lore "%colored {node::Ninja.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Ninja"]
		format slot 30 of {_p} with white glass pane named "&aPhanton" with lore "%colored {node::Phanton.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Phanton"]
		format slot 31 of {_p} with bowl named "&aQuick Dropper" with lore "%colored {node::Quick-Dropper.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Quick-Dropper"]
		format slot 32 of {_p} with soul sand named "&aSnail" with lore "%colored {node::Snail.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Snail"]
		format slot 33 of {_p} with anvil named "&aStomper" with lore "%colored {node::Stomper.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Stomper"]
		format slot 34 of {_p} with diamond chestplate named "&aTank" with lore "%colored {node::Tank.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Tank"]
		format slot 50 of {_p} with arrow named "&aPróxima página" to run [make {_p} execute command "kit page-2_kits"]
	{_type} == "kits-2":
		wait 3 tick
		open chest with 6  row named "Kits 2/2" to {_p}
		play sound "CLICK" to {_p} with volume 0.5 and pitch 15.0
		wait 1 tick
		format slot 10 of {_p} with wooden axe named "&aThor" with lore "%colored {node::Thor.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Thor"]
		format slot 11 of {_p} with clock named "&aTime Lord" with lore "%colored {node::Time-Lord.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Time-Lord"]
		format slot 12 of {_p} with spider eye named "&aViper" with lore "%colored {node::Viper.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Viper"]
		format slot 13 of {_p} with slime named "&aZen" with lore "%colored {node::Zen.lore}%%colored {khkp::kitreplace_select}%" to close then run [Make {_p} execute command "/kit Zen"]
		format slot 48 of {_p} with arrow named "&aPágina anterior" to run [make {_p} execute command "kit page-1_kits"]
	{_type} == "shop-kits":
		wait 3 tick
		open chest with 6  row named "Loja - Kits 1/1" to {_p}
		play sound "CLICK" to {_p} with volume 0.5 and pitch 15.0
		wait 2 tick
		loop "Anti-Stomper" and "Aquaman" and "Archer" and "Camel" and "Darkness" and "Espinhos" and "Fisherman" and "Fogareu" and "Frog" and "Galinha-Voadora" and "Warrior" and "Invencivel" and "Kangaroo" and "Monk" and "Ninja" and "Phanton" and "Quick-Dropper" and "Snail" and "Stomper" and "Tank" and "Thor":
			set {price_%loop-value%} to formatNumber({node::%loop-value%.price})
			set {khkp::kitreplace_buy.%loop-value%} to yml value "messages.kit.replaces.buy" from file "plugins/KhKits/language.yml"
			replace all "{price}" with colored {price_%loop-value%} in {khkp::kitreplace_buy.%loop-value%}
			replace all "\n" with "||" in {khkp::kitreplace_buy.%loop-value%}
		format slot 10 of {_p} with diamond boots named "&aAnti Stomper" with lore "%colored {node::Anti-Stomper.lore}%%colored {khkp::kitreplace_buy.Anti-Stomper}%" to run [Make {_p} execute command "/kit buy Anti-Stomper"]
		format slot 11 of {_p} with water bucket named "&aAquaman" with lore "%colored {node::Aquaman.lore}%%colored {khkp::kitreplace_buy.Aquaman}%" to run [Make {_p} execute command "/kit buy Aquaman"]
		format slot 12 of {_p} with bow named "&aArcher" with lore "%colored {node::Archer.lore}%%colored {khkp::kitreplace_buy.Archer}%" to run [Make {_p} execute command "/kit buy Archer"]
		format slot 13 of {_p} with sand named "&aCamel" with lore "%colored {node::Camel.lore}%%colored {khkp::kitreplace_buy.Camel}%" to run [Make {_p} execute command "/kit buy Camel"]
		format slot 14 of {_p} with 11-disc named "&aDarkness" with lore "%colored {node::Darkness.lore}%%colored {khkp::kitreplace_buy.Darkness}%" to run [Make {_p} execute command "/kit buy Darkness"]
		format slot 15 of {_p} with cactus named "&aEspinhos" with lore "%colored {node::Espinhos.lore}%%colored {khkp::kitreplace_buy.Espinhos}%" to run [Make {_p} execute command "/kit buy Espinhos"]
		format slot 16 of {_p} with fishing rod named "&aFisherman" with lore "%colored {node::Fisherman.lore}%%colored {khkp::kitreplace_buy.Fisherman}%" to run [Make {_p} execute command "/kit buy Fisherman"]
		format slot 19 of {_p} with blaze powder named "&aFogaréu" with lore "%colored {node::Fogareu.lore}%%colored {khkp::kitreplace_buy.Fogareu}%" to run [Make {_p} execute command "/kit buy Fogareu"]
		format slot 20 of {_p} with player head with custom nbt "{display:{Name:""&aFrog""},SkullOwner:{Id:""6e0e69d8-ac58-40a1-baf8-68de9d85cff8"",Properties:{textures:[{Value:""eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZDJjM2I5OGFkYTE5OTU3ZjhkODNhN2Q0MmZhZjgxYTI5MGZhZTdkMDhkYmY2YzFmODk5MmExYWRhNDRiMzEifX19""}]}}}" with lore "%colored {node::Frog.lore}%%colored {khkp::kitreplace_buy.Frog}%" to run [Make {_p} execute command "/kit buy Frog"]
		format slot 21 of {_p} with feather named "&aGalinha Voadora" with lore "%colored {node::Galinha-Voadora.lore}%%colored {khkp::kitreplace_buy.Galinha-Voadora}%" to run [Make {_p} execute command "/kit buy Galinha-Voadora"]
		format slot 22 of {_p} with diamond sword named "&aWarrior" with lore "%colored {node::Warrior.lore}%%colored {khkp::kitreplace_buy.Warrior}%" to run [Make {_p} execute command "/kit buy Warrior"]
		format slot 23 of {_p} with golden chestplate named "&aInvencível" with lore "%colored {node::Invencivel.lore}%%colored {khkp::kitreplace_buy.Invencivel}%" to run [Make {_p} execute command "/kit buy Invencivel"]
		format slot 24 of {_p} with firework rocket named "&aKangaroo" with lore "%colored {node::Kangaroo.lore}%%colored {khkp::kitreplace_buy.Kangaroo}%" to run [Make {_p} execute command "/kit buy Kangaroo"]
		format slot 25 of {_p} with blaze rod named "&aMonk" with lore "%colored {node::Monk.lore}%%colored {khkp::kitreplace_buy.Monk}%" to run [Make {_p} execute command "/kit buy Monk"]
		format slot 28 of {_p} with nether star named "&aNinja" with lore "%colored {node::Ninja.lore}%%colored {khkp::kitreplace_buy.Ninja}%" to run [Make {_p} execute command "/kit buy Ninja"]
		format slot 29 of {_p} with white glass pane named "&aPhanton" with lore "%colored {node::Phanton.lore}%%colored {khkp::kitreplace_buy.Phanton}%" to run [Make {_p} execute command "/kit buy Phanton"]
		format slot 30 of {_p} with bowl named "&aQuick Dropper" with lore "%colored {node::Quick-Dropper.lore}%%colored {khkp::kitreplace_buy.Quick-Dropper}%" to run [Make {_p} execute command "/kit buy Quick-Dropper"]
		format slot 31 of {_p} with soul sand named "&aSnail" with lore "%colored {node::Snail.lore}%%colored {khkp::kitreplace_buy.Snail}%" to run [Make {_p} execute command "/kit buy Snail"]
		format slot 32 of {_p} with anvil named "&aStomper" with lore "%colored {node::Stomper.lore}%%colored {khkp::kitreplace_buy.Stomper}%" to run [Make {_p} execute command "/kit buy Stomper"]
		format slot 33 of {_p} with diamond chestplate named "&aTank" with lore "%colored {node::Tank.lore}%%colored {khkp::kitreplace_buy.Tank}%" to run [Make {_p} execute command "/kit buy Tank"]
		format slot 34 of {_p} with wooden axe named "&aThor" with lore "%colored {node::Thor.lore}%%colored {khkp::kitreplace_buy.Thor}%" to run [Make {_p} execute command "/kit buy Thor"]
		format slot 49 of {_p} with rose red named "&cVoltar" to run [make {_p} execute command "/kit buy shop"]
		format slot 50 of {_p} with arrow named "&aPróxima página" to run [make {_p} execute command "kit buy main-2"]
	{_type} == "shop-kits-2":
		wait 3 tick
		open chest with 6  row named "Loja - Kits 2/2" to {_p}
		play sound "CLICK" to {_p} with volume 0.5 and pitch 15.0
		wait 2 tick
		loop "Time-Lord" and "Viper" and "Zen":
			set {price_%loop-value%} to formatNumber({node::%loop-value%.price})
			set {khkp::kitreplace_buy.%loop-value%} to yml value "messages.kit.replaces.buy" from file "plugins/KhKits/language.yml"
			replace all "{price}" with colored {price_%loop-value%} in {khkp::kitreplace_buy.%loop-value%}
			replace all "\n" with "||" in {khkp::kitreplace_buy.%loop-value%}
		format slot 10 of {_p} with clock named "&aTime Lord" with lore "%colored {node::Time-Lord.lore}%%colored {khkp::kitreplace_buy.Time-Lord}%" to run [Make {_p} execute command "/kit buy Time-Lord"]
		format slot 11 of {_p} with spider eye named "&aViper" with lore "%colored {node::Viper.lore}%%colored {khkp::kitreplace_buy.Viper}%" to run [Make {_p} execute command "/kit buy Viper"]
		format slot 12 of {_p} with slime named "&aZen" with lore "%colored {node::Zen.lore}%%colored {khkp::kitreplace_buy.Zen}%" to run [Make {_p} execute command "/kit buy Zen"]
		format slot 48 of {_p} with arrow named "&aPágina anterior" to run [make {_p} execute command "/kit buy main"]
		format slot 49 of {_p} with rose red named "&cVoltar" to run [make {_p} execute command "/kit buy shop"]
function khkits_kitsbuy(p: player, kit: text):
	set {_coins.%{_p}%} to yml value "%uuid of {_p}%.coins" of file "plugins/KhKits/players/%{_p}%.yml"
	{_kit} is set:
		{_kit} != "Aquaman" or "Zen" or "Quick-Dropper" or "Anti-Stomper" or "Espinhos" or "Stomper" or "Fisherman" or "Darkness" or "Snail" or "Ninja" or "Camel" or "Warrior" or "Archer" or "Frog" or "Kangaroo" or "Thor" or "Tank" or "Galinha-Voadora" or "Viper" or "Invencivel" or "Normal" or "Phanton" or "Fogareu" or "Time-Lord" or "Monk":
			send "&cEste kit não existe" to {_p}
		else:
			{kit_%{_kit}%.%{_p}%} != true:
				{_coins.%{_p}%} is greater or equal to {node::%{_kit}%.price}:
					send "&aVocê comprou o kit &n%{_kit}%&a!" to {_p}
					set {kit_%{_kit}%.%{_p}%} to true
					play sound "ITEM PICKUP" to {_p} with volume 0.5 and pitch 15.0
					remove {node::%{_kit}%.price} from {_coins.%{_p}%}
					add 1 to {kit_count.%{_p}%}
					set yml value "%uuid of {_p}%.coins" of file "plugins/KhKits/players/%{_p}%.yml" to {_coins.%{_p}%}
				else:
					send "&cVocê não tem moedas o suficiente." to {_p}
			else:
				send "&cVocê já possui este kit." to {_p}
function khkits_kits(p: player, kit: text):
	{_kit} is set:
		{_kit} != "Aquaman" or "Zen" or "Quick-Dropper" or "Anti-Stomper" or "Espinhos" or "Stomper" or "Fisherman" or "Darkness" or "Snail" or "Ninja" or "Camel" or "Warrior" or "Archer" or "Frog" or "Kangaroo" or "Thor" or "Tank" or "Galinha-Voadora" or "Viper" or "Invencivel" or "Normal" or "Phanton" or "Fogareu" or "Time-Lord" or "Monk":
			send "&cEste kit não existe" to {_p}
		else:
			set {khkp::select-kit} to yml value "messages.kit.select" of file "plugins/KhKits/language.yml"
			replace all "{kit}" with colored {_kit} in {khkp::select-kit}
			{_kit} == "Normal":
				set {_p}'s gamemode to adventure
				set {_p}'s fly mode to false
				khkits_setup({_p}, "effects")
				khkits_setup({_p}, "give_soup")
				set slot 0 of {_p} to unbreakable stone sword named "&eEspada"
				equip {_p} with unbreakable iron chestplate named "&ePeitoral"
				set action bar of {_p} to colored {khkp::select-kit}
				set yml value "%uuid of {_p}%.selected-kit" of file "plugins/KhKits/players/%{_p}%.yml" to "%{_kit}%"
				play sound "ITEM PICKUP" to {_p} with volume 0.5 and pitch 15.0
			else:
				{kit_%{_kit}%.%{_p}%} == true:
					set {_p}'s gamemode to adventure
					set {_p}'s fly mode to false
					khkits_setup({_p}, "effects")
					khkits_setup({_p}, "give_soup")
					set slot 0 of {_p} to unbreakable stone sword named "&eEspada"
					equip {_p} with unbreakable iron chestplate named "&ePeitoral"
					set action bar of {_p} to colored {khkp::select-kit}
					set yml value "%uuid of {_p}%.selected-kit" of file "plugins/KhKits/players/%{_p}%.yml" to "%{_kit}%"
					play sound "ITEM PICKUP" to {_p} with volume 0.5 and pitch 15.0
					#set {sword-%{_p}%} to unbreakable stone sword
					{_kit} == "Warrior":
						set slot 0 of {_p} to unbreakable diamond sword of sharpness 1 named "&eEspada"
						equip {_p} with unbreakable leather Chestplate named "&ePeitoral"
						dye {_p}'s chestplate gray
					{_kit} == "Archer":
						set slot 8 of {_p} to unbreakable bow of infinity 1 named "&eArco"
						set slot 17 of {_p} to arrow named "&eMunição"
						equip {_p} with unbreakable gold Chestplate named "&ePeitoral"
					{_kit} == "Kangaroo":
						set slot 8 of {_p} to firework rocket named "&eKangaroo"
					{_kit} == "Frog":
						set slot 0 of {_p} to unbreakable diamond sword named "&eEspada"
						equip {_p} with player head with custom nbt "{display:{Name:""&eFrog""},SkullOwner:{Id:""6e0e69d8-ac58-40a1-baf8-68de9d85cff8"",Properties:{textures:[{Value:""eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZDJjM2I5OGFkYTE5OTU3ZjhkODNhN2Q0MmZhZjgxYTI5MGZhZTdkMDhkYmY2YzFmODk5MmExYWRhNDRiMzEifX19""}]}}}"
						equip {_p} with unbreakable leather Chestplate named "&ePeitoral"
						dye {_p}'s chestplate green
						apply jump boost 3 to {_p} for 99999 seconds
					{_kit} == "Thor":
						set slot 8 of {_p} to unbreakable wooden axe named "&eThor"
						equip {_p} with player head with custom nbt "{display:{Name:""&eThor""},SkullOwner:{Id:""7529b65e-a551-4f43-90d3-7f38318953f6"",Properties:{textures:[{Value:""eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMmE5ZjgzMzI5YTJlNDc1YTc1MzM1YjM5NDlhYTRkMDU0ZjlkZTQxM2JmYjI4YWE2MGRlMmU1MjU5ZWNhYWQxIn19fQ==""}]}}}"
					{_kit} == "Tank":
						equip {_p} with unbreakable diamond Chestplate named "&ePeitoral"
						apply mining fatigue 1 to {_p} for 99999 seconds
						apply slowness 1 to {_p} for 99999 seconds
					{_kit} == "Galinha-Voadora":
						set slot 8 of {_p} to feather named "&eGalinha Voadora"
					{_kit} == "Monk":
						set slot 8 of {_p} to blaze rod named "&eMonk"
					{_kit} == "Time-Lord":
						set slot 8 of {_p} to clock named "&eTime Lord"
					{_kit} == "Fogareu":
						apply fire resistance 1 to {_p} for 99999 seconds
					{_kit} == "Phanton":
						set slot 8 of {_p} to white glass pane named "&ePhanton"
					{_kit} == "Fisherman":
						set slot 8 of {_p} to unbreakable fishing rod named "&eFisherman"
					{_kit} == "Zen":
						set slot 8 of {_p} to slime named "&eZen"
				else:
					send "&cVocê não comprou este kit." to {_p}
	
# ──────────────────────────────────────────────────────────────────────────────────────────────────────────────── #
# load
on load:
	khkits_filemanager("create")
	khkits_scoreboard(all players)
	send "&3[KHKITS] &eChecking for updates..." to console
	wait 2 seconds
	"https://api.spigotmc.org/legacy/update.php?resource=67595" != "{@version}":
		send "&3[KHKITS] &cYou are not using the latest version of skript." to console
	else:
		send "&3[KHKITS] &aYou are using the latest version of skript." to console
	wait 2 seconds
	send "&3[KHKITS] &aKhKits &8v{@version} &aenabled!" to console
